"use strict";$(function(){function t(t,e,a){$.ajax({url:"http://mmb.ittun.com/api/getcategorybyid",data:{categoryid:e},success:function(e){e=e.result;var a="";a+='  <a href="index.html" class="list-title1">首页</a> >',a+='  <a href="category.html" class="list-title2">全部分类</a> >',a+='  <a href="#" class="list-title3" id="category">'+e[0].category+"</a> >",a+='  <a href="" class="select">筛选</a>',t.html(a)}})}function e(t,e,a,c){$.ajax({url:"http://mmb.ittun.com/api/getproductlist",data:{categoryid:e,pageid:a},success:function(c){var i=Math.ceil(c.totalCount/c.pagesize);c=c.result;for(var r="<ul>",s=0;s<c.length;s++)r+="<li>",r+='<a href="bijia.html?productid='+c[s].productId+'">',r+='<div class="pic">',r+=c[s].productImg,r+="</div>",r+='<div class="info">',r+='<div class="tit">',r+=c[s].productName,r+="</div>",r+='<div class="price">',r+="<em>"+c[s].productPrice+"</em>",r+='<span class="star"><em class="star5"></em></span>',r+="</div>",r+='<div class="other">',r+="<em>"+c[s].productQuote+"</em>",r+="<em>"+c[s].productCom+"</em>",r+="</div>",r+="</div>",r+="</a>",r+="</li>";r+="</ul>",r+='<div class="clearfix page">',r+='<span class="w33"><a href="productlist.html?categoryid='+e+"&category="+$("#category").html()+"&pageid="+(a-1)+'">上一页</a></span>',r+='<span class="w33"><select id="selectPage" name="select"  selected style="border: 1px solid #bababa; font-size: 16px; padding: 8px 15px; height: 36px"">';for(var s=0;s<i;s++)r+=a==s+1?'<option value="'+Number(s+1)+'" selected>'+Number(s+1)+"/"+Number(i)+"</option>":'<option value="'+Number(s+1)+'">'+Number(s+1)+"/"+Number(i)+"</option>";r+="</select></span>",r+='<span class="w33"><a href="productlist.html?categoryid='+e+"&category="+$("#category").html()+"&pageid="+(Number(a)+1)+'" >下一页</a></span>',r+="</div>",t.html(r),$("#selectPage").on("change",function(t){window.location.href="productlist.html?categoryid="+$.getUrlParam("categoryid")+"&category="+$("#category").html()+"&pageid="+$(this).val(),$(this).attr("selected","selected")})}})}t($(".product-list-title"),$.getUrlParam("categoryid")),e($("#product-list > .product-list"),$.getUrlParam("categoryid"),$.getUrlParam("pageid"))}),function(t){t.getUrlParam=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return null!=a?unescape(a[2]):null}}(jQuery);