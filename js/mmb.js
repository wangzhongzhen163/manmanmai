"use strict";function setShop(t,a){$.ajax({url:"http://mmb.ittun.com/api/getgsshop",success:function(a){var e=template("gsShop",a);t.html(e)}})}function setArea(t,a){$.ajax({url:"http://mmb.ittun.com/api/getgsshoparea",success:function(a){var e=template("gsArea",a);t.html(e)}})}function setProductList(t,a,e){$.ajax({url:"http://mmb.ittun.com/api/getgsproduct",data:{shopid:a.shopid||0,areaid:a.areaid||0},success:function(a){var e=template("gsProductList",a);t.html(e)}})}function setFilter(t,a,e){var a={result:[{selected:"京东",selectName:"shop"},{selected:"华北",selectName:"area"},{selected:"全部价格",selectName:"price"}]},i=template("filter",a);t.html(i)}function SelectShow(t){$("#"+t).toggleClass("on")}function GetShopProduct(t,a,e){$(".shop").html(e+"<i></i>"),$(".shop").attr("data-id",a),$("[data-"+t+"]").parent().removeClass("on"),$("[data-"+t+"="+a+"]").parent().addClass("on"),$("[data-"+t+"="+a+"]").parent().parent().parent().removeClass("on");var i=$(".filter").find(".area").data("id");setProductList($(".gs-product-list"),{shopid:a,areaid:i})}function GetAreaProduct(t,a,e){$(".area").html(e+"<i></i>"),$(".area").attr("data-id",a),$("[data-"+t+"]").parent().removeClass("on"),$("[data-"+t+"="+a+"]").parent().addClass("on"),$("[data-"+t+"="+a+"]").parent().parent().parent().removeClass("on");var i=$(".filter").find(".shop").data("id");setProductList($(".gs-product-list"),{shopid:i,areaid:a})}$(function(){function t(t,e){$.ajax({url:"http://mmb.ittun.com/api/getbaicaijiatitle",success:function(i){var c=template("bcjTitle",i);t.html(c);for(var o=t.find(".ul-wapper .tabs li"),n=0,r=0;r<o.length;r++)n+=$(o[r]).width();var l=$(window).width();l<768&&t.find(".ul-wapper .tabs").css("width",n+38),$(o[e||0]).addClass("active"),a(t.find(".ul-wapper .tabs"),e)}})}function a(t,a){function e(t){t.css("transition","all 0.2s")}function i(t,a){t.css("transform","translateX("+a+"px)")}for(var c=t.width(),o=t.parent().width(),n=50,r=0,l=o-c,s=0+n,u=l-50,d=0,m=0,p=0,h=0,g=t.find("li"),f=0;f<a;f++)h-=$(g[f]).width();h<l?h=l:h>r&&(h=r),e(t),i(t,h),t[0].addEventListener("touchstart",function(t){d=t.touches[0].clientX}),t[0].addEventListener("touchmove",function(a){m=a.touches[0].clientX,p=m-d,h+p>u&&h+p<s&&(e(t),i(t,h+p))}),t[0].addEventListener("touchend",function(a){h+p>r?(h=r,e(t),i(t,h)):h+p<l?(h=l,e(t),i(t,h)):h+=p})}function e(t,a,e){$.ajax({url:"http://mmb.ittun.com/api/getbaicaijiaproduct",data:{titleid:a||0},success:function(a){var e=template("bcjProductList",a);t.html(e)}})}t($(".bcj-title"),$.getUrlParam("titleid")),e($(".bcj-list"),$.getUrlParam("titleid"))}),$(function(){function t(t,a,e){$.ajax({url:"http://mmb.ittun.com/api/getproduct",data:{productid:a||0},success:function(a){a=a.result,a.length>0?(t.find(".product-name").html(a[0].productName),t.find(".product-img").html(a[0].productImg),t.parent().find(".plist > a").html(a[0].bjShop)):window.location.href="category.html"}})}function a(t,a,e){$.ajax({url:"http://mmb.ittun.com/api/getproductcom",data:{productid:a||0},success:function(a){if(a=a.result,a.length>0){for(var e="<ul>",i=0;i<a.length;i++)e+="<li>",e+='<div class="clearfix">',e+='<span class="pull-left com-name">'+a[i].comName+"</span>",e+='<span class="pull-right com-time">'+a[i].comTime+"</span>",e+="</div>",e+='<div class="clearfix">',e+='<span class="star pull-left com-star"><em class="star5"></em></span>',e+='<span class="pull-right com-from">'+a[i].comFrom+"</span>",e+="</div>",e+='<div class="com-content">'+a[i].comContent+"</div>",e+="</li>";e+="</ul>",e+=' <div class="more"> <a class="morein" href="comment.aspx?id=473088">查看更多评价</a></div>',t.html(e)}else window.location.href="category.html"}})}function e(t,a,e){$.ajax({url:"http://mmb.ittun.com/api/getproduct",data:{productid:a||0},success:function(a){a=a.result,a.length>0?$.ajax({url:"http://mmb.ittun.com/api/getcategorybyid",data:{categoryid:a[0].categoryId||0},success:function(e){if(e=e.result){var i="";i+='  <a href="index.html" class="list-title1">首页</a> >',i+='  <a href="productlist.html?categoryid='+e[0].categoryId+"&category="+e[0].category+'&pageid=1" class="list-title2">'+e[0].category+"</a> >",i+='  <a href="#" class="list-title3">'+a[0].productName.split(" ")[0]+"</a> >",i+='  <a href="" class="select">筛选</a>',t.html(i)}}}):window.location.href="category.html"}})}e($(".product-list-title"),$.getUrlParam("productid")),t($(".product-bijia"),$.getUrlParam("productid")),a($(".product-com-list"),$.getUrlParam("productid"))}),function(t){t.getUrlParam=function(t){var a=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(a);return null!=e?unescape(e[2]):null}}(jQuery),$(function(){function t(t,e,i){$.ajax({url:"http://mmb.ittun.com/api/getbrand",data:{brandtitleid:e},success:function(e){var i=template("brandList",e);t.html(i),a($(".product-list"),e.result[0].brandTitleId)}})}function a(t,a,i){$.ajax({url:"http://mmb.ittun.com/api/getbrandproductlist",data:{brandtitleid:a,pagesize:4},success:function(a){var i=template("brandProduct",a);t.html(i),e($(".product-com"),a.result)}})}function e(t,a,e){for(var i=[],c=0;c<a.length;c++)i.push(a[c].productId);$.ajax({url:"http://mmb.ittun.com/api/getproduct",data:{productid:i[0]},success:function(a){a=a.result;for(var e=0;e<a.length;e++)$.ajax({url:"http://mmb.ittun.com/api/getproductcom",data:{productid:i[0]},success:function(e){e=e.result;for(var i=[],c=0;c<e.length;c++)i.push({productName:a[0].productName,productImg:a[0].productImg,comContent:e[c].comContent,comTime:e[c].comTime,comFrom:e[c].comFrom,comName:e[c].comName});e={result:i};var o=template("ProductCom",e);t.html(o)}})}})}t($(".brand-list"),$.getUrlParam("brandtitleid"))}),function(t){t.getUrlParam=function(t){var a=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(a);return null!=e?unescape(e[2]):null}}(jQuery),$(function(){function t(t,a){$.ajax({url:"http://mmb.ittun.com/api/getbrandtitle",success:function(a){a=a.result;for(var e='<ul class="category-title">',i=0;i<a.length;i++)e+="<li>",e+='<a href="brand.html?brandtitleid='+a[i].brandTitleId+'" data-title-id="'+a[i].brandTitleId+'" style="background-image:url(http://www.zuyushop.com/wap/images/arrow1.gif);">',e+=a[i].brandTitle,e+="</a>",e+="</li>";e+="</ul>",$(t).html(e)}})}t($("#category > .row"))}),$(function(){function t(t,e){$.ajax({url:"http://mmb.ittun.com/api/getcategorytitle",success:function(e){e=e.result;for(var i='<ul class="category-title">',c=0;c<e.length;c++)i+="<li>",i+='<a href="javascript:void(0)" data-title-id="'+e[c].titleId+'" style="background-image:url(http://www.zuyushop.com/wap/images/arrow1.gif);">',i+=e[c].title,i+="</a>",i+="</li>";i+="</ul>",$(t).html(i),a($("#category > .row > .category-title > li > a"))}})}function a(t,a){$(t).one("click",function(){var t=$(this);$(this).parent().find("ul").toggleClass("hide"),$.ajax({url:"http://mmb.ittun.com/api/getcategory",data:{titleid:$(this).data("titleId")},success:function(a){a=a.result;for(var e='<ul class="category-content clearfix">',i=0;i<a.length;i++)e+="<li>",e+='<a href="productlist.html?categoryid='+a[i].categoryId+"&category="+a[i].category+'&pageid=1" data-category-id="'+a[i].categoryId+'">',e+=a[i].category,e+="</a>",e+="</li>";e+="</ul>",t.parent().append(e)}})}),$(t).on("click",function(){$(this).parent().find("ul").toggleClass("hide")})}t($("#category > .row"))}),$(function(){function t(t,a){$.ajax({url:"http://mmb.ittun.com/api/getcoupon",success:function(a){var e=template("couponTitle",a);t.html(e)}})}t($(".coupon-title"))}),$(function(){function t(t,a,e){$.ajax({url:"http://mmb.ittun.com/api/getcouponproduct",data:{couponid:a},success:function(a){var e=template("couponList",a);t.html(e)}})}t($(".coupon-list"),$.getUrlParam("couponid"))}),$(function(){function t(t,a,e){$.ajax({url:"http://mmb.ittun.com/api/getdiscountproduct",data:{productid:a},success:function(a){var e=template("discountProduct",a);t.html(e)}})}t($(".discount-product"),$.getUrlParam("productid"))}),setShop($(".popsort")),setArea($(".popcat")),setProductList($(".gs-product-list"),{shopid:0,areaid:0}),setFilter($(".filter")),$(function(){function t(t,e){$.ajax({url:"http://mmb.ittun.com/api/getindexmenu",dataType:"jsonp",jsonp:"callback",success:function(e){e=e.result;for(var i="",c=0;c<e.length;c++)i+='<div class="menu-item">',i+='<a href="'+e[c].titlehref+'">',i+=e[c].img,i+="<p>"+e[c].name+"</p>",i+="</a>",i+="</div>";$(t).html(i),$("#menu > .row > .menu-item:nth-last-child(-n+4)").addClass("hide"),a($("#menu > .row > .menu-item:nth-child(8) > a"))}})}function a(t,a){$(t).on("click",function(){$("#menu > .row > .menu-item:nth-last-child(-n+4)").toggleClass("hide")})}function e(t,a,e){$.ajax({url:"http://mmb.ittun.com/api/getmoneyctrl",dataType:"jsonp",jsonp:"callback",success:function(a){var e=template("moneyCtrl",a);t.html(e)}})}t($("#menu > .row")),e($(".product-list"))}),$(function(){function t(t,a){$.ajax({url:"http://mmb.ittun.com/api/getinlanddiscount",success:function(a){var e=template("productList",a);t.html(e),$(".loading").hide()}})}t($(".inland-discount-list"))}),$(function(){function t(t,a,e){$.ajax({url:"http://mmb.ittun.com/api/getmoneyctrl",data:{pageid:a-1},success:function(e){e.pageCount=Math.floor(e.totalCount/e.pagesize),e.pageid=a||1,e.page=[];for(var i=0;i<e.pageCount;i++)e.page.push({pageid:i+1,pageCount:e.pageCount});var c=template("moneyCtrl",e);t.html(c),$("#selectPage").on("change",function(t){window.location.href="moneyctrl.html?pageid="+$(this).val(),$(this).attr("selected","selected")})}})}t($(".money-ctrl"),$.getUrlParam("pageid")||1)}),$(function(){function t(t,a,e){$.ajax({url:"http://mmb.ittun.com/api/getmoneyctrlproduct",data:{productid:a},success:function(a){var e=template("moneyProduct",a);t.html(e)}})}t($(".money-product"),$.getUrlParam("productid"))}),$(function(){function t(t,a,e){$.ajax({url:"http://mmb.ittun.com/api/getcategorybyid",data:{categoryid:a},success:function(a){a=a.result;var e="";e+='  <a href="index.html" class="list-title1">首页</a> >',e+='  <a href="category.html" class="list-title2">全部分类</a> >',e+='  <a href="#" class="list-title3" id="category">'+a[0].category+"</a> >",e+='  <a href="" class="select">筛选</a>',t.html(e)}})}function a(t,a,e,i){$.ajax({url:"http://mmb.ittun.com/api/getproductlist",data:{categoryid:a,pageid:e},success:function(i){var c=Math.ceil(i.totalCount/i.pagesize);i=i.result;for(var o="<ul>",n=0;n<i.length;n++)o+="<li>",o+='<a href="bijia.html?productid='+i[n].productId+'">',o+='<div class="pic">',o+=i[n].productImg,o+="</div>",o+='<div class="info">',o+='<div class="tit">',o+=i[n].productName,o+="</div>",o+='<div class="price">',o+="<em>"+i[n].productPrice+"</em>",o+='<span class="star"><em class="star5"></em></span>',o+="</div>",o+='<div class="other">',o+="<em>"+i[n].productQuote+"</em>",o+="<em>"+i[n].productCom+"</em>",o+="</div>",o+="</div>",o+="</a>",o+="</li>";o+="</ul>",o+='<div class="clearfix page">',o+='<span class="w33"><a href="productlist.html?categoryid='+a+"&category="+$("#category").html()+"&pageid="+(e-1)+'">上一页</a></span>',o+='<span class="w33"><select id="selectPage" name="select"  selected style="border: 1px solid #bababa; font-size: 16px; padding: 8px 15px; height: 36px"">';for(var n=0;n<c;n++)o+=e==n+1?'<option value="'+Number(n+1)+'" selected>'+Number(n+1)+"/"+Number(c)+"</option>":'<option value="'+Number(n+1)+'">'+Number(n+1)+"/"+Number(c)+"</option>";o+="</select></span>",o+='<span class="w33"><a href="productlist.html?categoryid='+a+"&category="+$("#category").html()+"&pageid="+(Number(e)+1)+'" >下一页</a></span>',o+="</div>",t.html(o),$("#selectPage").on("change",function(t){window.location.href="productlist.html?categoryid="+$.getUrlParam("categoryid")+"&category="+$("#category").html()+"&pageid="+$(this).val(),$(this).attr("selected","selected")})}})}t($(".product-list-title"),$.getUrlParam("categoryid")),a($("#product-list > .product-list"),$.getUrlParam("categoryid"),$.getUrlParam("pageid"))}),function(t){t.getUrlParam=function(t){var a=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(a);return null!=e?unescape(e[2]):null}}(jQuery),$(function(){function t(t,a){$.ajax({url:"http://mmb.ittun.com/api/getsitenav",success:function(a){var e=template("siteNav",a);t.html(e)}})}t($(".site-nav"))});